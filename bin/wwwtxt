#!/usr/bin/env ruby
require "gli"
require "wwwtxt"

include GLI::App

program_desc "Turn websites into plain text"

version WwwTxt::VERSION

desc "Download a single URL as plain text"
flag [:o,:out_dir], default_value: File.join(ENV["HOME"], "texts")
arg_name "url"
command :get do |c|
  c.action do |global_options, options, args|
    args.each do |url|
      WwwTxt::UrlFetcher.page(url).save(global_options[:out_dir])
    end
  end
end

pre do |global,command,options,args|
  true
end

post do |global,command,options,args|
end

on_error do |exception|
  true
end

exit run(ARGV)
